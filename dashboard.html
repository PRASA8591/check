<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Dashboard â€” Attendance</title>
  <link rel="stylesheet" href="styles/styles.css">
  <style>
    .container { max-width:1000px; margin:20px auto; padding:12px; }
    .header { display:flex; align-items:center; justify-content:space-between; }
    .logo { display:flex; align-items:center; gap:8px; font-size:20px; font-weight:600; }
    .logo img { height:40px; }
    .btn-logout { background:#ef4444; color:#fff; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; }
    .form-box{ margin:14px 0; display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    select, input { padding:5px; border-radius:6px; border:1px solid #ccc; font-size:13px; }

    table { width:100%; border-collapse:collapse; font-size:13px; margin-top:12px; }
    th,td { border:1px solid #e6eefb; padding:4px 6px; text-align:center; }
    th { background:#1976d2; color:#fff; font-weight:600; }

    #monthTitle { margin-top:10px; font-size:16px; font-weight:600; text-align:center; color:#1976d2; }

    @media(max-width:700px){
      th,td{ padding:3px; font-size:11px; }
      .form-box{ flex-direction:column; align-items:flex-start; }
      .btn-logout{ padding:5px 10px; font-size:13px; }
    }

    #popup { position:fixed; top:16px; right:16px; display:none; padding:10px 14px; color:#fff; border-radius:8px; z-index:9999; box-shadow:0 6px 18px rgba(2,6,23,0.15); }
  </style>

  <!-- guard -->
  <script>
    try {
      const u = JSON.parse(localStorage.getItem("loggedInUser"));
      if (!u || u.role !== "user") {
        window.location.replace("index.html");
      }
    } catch(e){ window.location.replace("index.html"); }
  </script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">
        <img src="assets/logo.png" alt="Logo">
        Attendance Dashboard
      </div>
      <button id="logoutBtn" class="btn-logout">Logout</button>
    </div>

    <h2 id="welcome"></h2>

    <div class="form-box">
      <label>Year:</label>
      <input type="number" id="year" value="2025" min="2000" max="2100">
      <label>Month:</label>
      <select id="month">
        <option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option>
        <option value="4">Apr</option><option value="5">May</option><option value="6">Jun</option>
        <option value="7">Jul</option><option value="8">Aug</option><option value="9">Sep</option>
        <option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
      </select>
    </div>

    <h3 id="monthTitle"></h3>

    <table>
      <thead>
        <tr><th>Date</th><th>In Time</th><th>Out Date</th><th>Out Time</th><th>Hours Worked</th></tr>
      </thead>
      <tbody id="attendanceBody"></tbody>
    </table>
    <h4>Total Hours: <span id="totalHours">0</span></h4>
  </div>

  <div id="popup"></div>

  <script type="module" src="js/dashboard.js"></script>
</body>
</html>
